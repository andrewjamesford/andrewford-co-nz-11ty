<!doctype html>
<html lang="{{ metadata.language }}">
	<head>
		<meta charset="utf-8">
		{# CSP #}
		<meta http-equiv="Content-Security-Policy" content="script-src-elem 'self' 'unsafe-inline' www.googletagmanager.com youtube.com cdn.jsdelivr.net storage.ko-fi.com">
		<meta name="view-transition" content="same-origin"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>{{ title or metadata.title }} - Andrew Ford </title>
		<meta name="description" content="{{ description or metadata.description }}">
		<meta name="fediverse:creator" content="@andrewford@mastodon.nz"/>
		<base href="{{ metadata.fullUrl }}"/>

		{# Icons #}
		<meta name="msapplication-TileColor" content="#eee">
		<meta name="msapplication-TileImage" content="{{ metadata.fullUrl }}/ms-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="57x57" href="{{ metadata.fullUrl }}/apple-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="{{ metadata.fullUrl }}/apple-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="{{ metadata.fullUrl }}/apple-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="{{ metadata.fullUrl }}/apple-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="{{ metadata.fullUrl }}/apple-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="{{ metadata.fullUrl }}/apple-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="{{ metadata.fullUrl }}/apple-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="{{ metadata.fullUrl }}/apple-icon-152x152.png">
		<link rel="apple-touch-icon" sizes="180x180" href="{{ metadata.fullUrl }}/apple-icon-180x180.png">
		<link rel="icon" type="image/png" sizes="192x192"  href="{{ metadata.fullUrl }}/android-icon-192x192.png">
		<link rel="icon" type="image/png" sizes="32x32" href="{{ metadata.fullUrl }}/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="96x96" href="{{ metadata.fullUrl }}/favicon-96x96.png">
		<link rel="icon" type="image/png" sizes="16x16" href="{{ metadata.fullUrl }}/favicon-16x16.png">

		<link rel="canonical" href="https://andrewford.co.nz/{{ page.url }}">

		<link async rel="dns-prefetch" href="https://www.googletagmanager.com/">
		<link async href="https://www.googletagmanager.com/gtag/js?id={{ metadata.gTag}}" rel="preload" as="script">

		{# Atom and JSON feeds included by default #}
		<link rel="alternate" href="{{ metadata.fullUrl }}/feed/feed.xml" type="application/atom+xml" title="{{ metadata.title }}">
		<link rel="alternate" href="{{ metadata.fullUrl }}/feed/feed.json" type="application/json" title="{{ metadata.title }}">

		{# open graph #}
		<meta property="og:title" content="{{ heading or title or metadata.title or "Andrew Ford" }}"/>
		<meta property="og:type" content="website"/>
		<meta property="og:description" content="{{ description or metadata.description }}"/>
		{% if ogimage %}
			<meta property="og:image" content="{{ metadata.fullUrl }}/ogimage/{{ ogimage }}"/>
		{% else %}
			<meta property="og:image" content="{{ metadata.fullUrl }}/ogimage/{{ "social-card.png" }}"/>
		{% endif %}
		<meta property="og:url" content="{{ metadata.fullUrl }}{{ page.url }}">

		{# twitter #}
		<meta name="twitter:card" content="summary_large_image">
		<meta property="twitter:domain" content="andrewford.co.nz">
		<meta property="twitter:url" content="{{ metadata.fullUrl }}{{ page.url }}">
		<meta name="twitter:title" content="{{ heading or title or metadata.title or "Andrew Ford" }}">
		<meta name="twitter:description" content="{{ description or metadata.description }}">
		{% if ogimage %}
			<meta name="twitter:image" content="{{ metadata.fullUrl }}/ogimage/{{ ogimage }}">
		{% else %}
			<meta property="twitter:image" content="{{ metadata.fullUrl }}/ogimage/{{ "social-card.png" }}"/>
		{% endif %}

		{# Uncomment this if youâ€™d like folks to know that you used Eleventy to build your site! #}
		<meta name="generator" content="{{ eleventy.generator }}">

		{# Webmention.io #}
		<link rel="webmention" href="https://webmention.io/andrewford.co.nz/webmention"/>
		<link rel="pingback" href="https://webmention.io/andrewford.co.nz/xmlrpc"/>
		{#
		CSS bundles are provided via the `eleventy-plugin-bundle` plugin:
		 https://github.com/11ty/eleventy-plugin-bundle
		#}

		{# Add the contents of a file to the CSS bundle #}
		{%- css %}{% include "public/css/critical.css" %}{% endcss %}

		{# Render the CSS bundle using Inlined CSS (for the fastest site performance in production) #}
		<style>
			{% getBundle "css" %}
		</style>

		{%- css "styles" %}{% include "public/css/style.css" %}{% endcss %}

		{# Non-critical styles #}
		<link rel="preload" href="{% getBundleFileUrl 'css', 'styles' %}" as="style" onload="this.onload=null;this.rel='stylesheet'" onerror="this.rel='stylesheet'">
		<noscript><link rel="stylesheet" href="{% getBundleFileUrl 'css', 'styles' %}"></noscript>

		{# Add the contents of a file to the JS bundle #}
		{%- js %}{% include "public/scripts/lastFM.js" %}{% endjs %}
		{%- js %}{% include "public/scripts/chat.js" %}{% endjs %}

	</head>

	<body class="body">
		<a href="#skip" class="skip-link">Skip to main content</a>

		<header class="header">
			<div class="avatar-wrapper">
				<a href="{{ metadata.fullUrl + '/' }}" class="avatar" name="Home" aria-label="Return to Home">
					<svg class="logo" viewBox="0 0 554 554" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
						<title>Logo for Andrew Ford showing a circle with the letters AF</title>
						<path id="Ellipse" fill="#000" fill-rule="evenodd" stroke="#000000" stroke-width="5" d="M 551 277 C 551 125.673981 428.326019 3 277 3 C 125.673981 3 3 125.673981 3 277 C 3 428.326019 125.673981 551 277 551 C 428.326019 551 551 428.326019 551 277 Z"/>
						<path id="AF" fill="#fff" fill-rule="evenodd" stroke="none" d="M 80.583984 376 L 80.583984 372.832031 C 85.576042 372.255981 89.848389 370.91272 93.400391 368.800781 C 96.952393 366.688721 99.015747 365.248535 99.591797 364.480469 C 100.935791 363.136475 103.144897 359.968628 106.216797 354.976563 C 109.288818 349.984619 113.031258 342.592773 117.447266 332.800781 C 121.47924 323.776733 125.992317 313.504395 130.984375 301.984375 C 135.97644 290.464355 141.112549 278.608154 146.392578 266.416016 C 151.672607 254.223877 156.903809 241.936768 162.087891 229.552734 C 167.271851 217.168701 172.167358 205.599854 176.775391 194.847656 L 173.896484 188.511719 C 177.352539 186.97583 180.471924 185.151123 183.255859 183.039063 C 186.039917 180.927002 188.487671 178.719971 190.599609 176.416016 C 192.71167 174.112061 194.487793 171.905029 195.927734 169.792969 C 197.367798 167.680908 198.47229 165.951416 199.240234 164.607422 L 201.542969 164.607422 C 207.494995 180.543671 213.159058 195.664551 218.535156 209.96875 C 223.911133 224.272705 229.047363 238.048828 233.943359 251.296875 C 238.839355 264.544922 243.591187 277.359985 248.199219 289.744141 C 252.807251 302.128174 257.415405 314.368774 262.023438 326.464844 C 264.135376 332.41687 266.10376 337.36084 267.927734 341.296875 C 269.751709 345.23291 271.815186 349.695435 274.119141 354.6875 C 274.503174 355.455566 275.368896 356.800781 276.712891 358.720703 C 278.056885 360.640747 279.831055 362.609009 282.039063 364.625 C 284.24707 366.640991 286.984009 368.415161 290.248047 369.951172 C 291.660156 370.615723 293.180847 371.155396 294.808594 371.568359 C 296.990204 370.952515 299.090729 370.220825 301.111328 369.375 C 305.239258 367.646973 308.647827 365.247803 311.335938 362.175781 C 312.295898 361.023804 313.064575 359.344727 313.640625 357.136719 C 314.216553 354.928711 314.744629 352.383911 315.224609 349.503906 C 315.70459 346.623901 316.040405 343.599609 316.232422 340.431641 C 316.424316 337.263672 316.519531 334.144287 316.519531 331.072266 C 316.519531 328.384277 316.568115 324.736938 316.664063 320.128906 C 316.760132 315.520874 316.855103 310.479736 316.951172 305.007813 C 317.047119 299.535767 317.095703 293.920166 317.095703 288.160156 C 317.095703 282.20813 317.095703 276.641113 317.095703 271.457031 L 317.095703 215.296875 C 317.095703 211.841064 317.047119 208.288818 316.951172 204.640625 C 316.855103 200.992676 316.662964 197.535645 316.375 194.271484 C 316.087036 191.007568 315.607544 188.080322 314.935547 185.488281 C 314.26355 182.89624 313.351318 181.022949 312.199219 179.871094 C 309.319214 176.799072 306.248413 174.832764 302.984375 173.96875 C 299.720337 173.104736 295.49646 172.287598 290.3125 171.519531 L 290.3125 168.640625 L 450.439453 168.640625 L 470.023438 217.023438 L 467.144531 218.464844 C 459.272461 208.672607 451.783691 200.320313 444.679688 193.408203 C 437.575562 186.496094 430.663452 181.408447 423.943359 178.144531 C 420.679321 176.608398 414.776367 175.311768 406.232422 174.255859 C 397.688354 173.199707 387.751953 172.671875 376.423828 172.671875 C 374.503906 172.671875 372.296753 172.720459 369.800781 172.816406 C 367.304688 172.912598 364.903687 173.007568 362.599609 173.103516 C 360.295654 173.199463 358.135132 173.296387 356.119141 173.392578 C 354.103149 173.488525 352.616211 173.535156 351.65625 173.535156 C 351.464233 174.687256 351.223511 175.840332 350.935547 176.992188 C 350.647461 178.144287 350.408813 179.487549 350.216797 181.023438 C 350.024902 182.55957 349.832642 184.527832 349.640625 186.927734 C 349.448608 189.327881 349.25647 192.255127 349.064453 195.710938 C 348.872437 202.431152 348.728882 209.776123 348.632813 217.744141 C 348.536865 225.712402 348.488281 233.247559 348.488281 240.351563 C 348.488281 247.455566 348.488281 253.599121 348.488281 258.783203 C 348.488281 263.775391 348.488281 266.750977 348.488281 267.710938 C 349.064209 267.710938 350.79187 267.710938 353.671875 267.710938 C 356.743896 267.710938 360.152466 267.615723 363.896484 267.423828 C 367.640503 267.231689 371.528442 266.990967 375.560547 266.703125 C 379.592529 266.415039 382.952637 265.984131 385.640625 265.408203 C 392.552612 263.872314 398.024536 261.855225 402.056641 259.359375 C 406.088623 256.863281 409.25647 253.887695 411.560547 250.431641 C 413.864502 246.97583 415.496948 243.184814 416.457031 239.056641 C 417.416992 234.928711 418.280884 230.464111 419.048828 225.664063 L 422.503906 225.664063 L 422.503906 318.400391 L 419.048828 318.400391 C 417.512817 312.256348 415.303833 305.776978 412.423828 298.960938 C 409.543823 292.144897 406.088623 286.911743 402.056641 283.263672 C 398.408569 279.999756 394.52063 277.552002 390.392578 275.919922 C 386.264648 274.288086 381.415649 273.280518 375.847656 272.896484 C 372.967651 272.70459 370.471436 272.560791 368.359375 272.464844 C 366.247437 272.368652 364.232544 272.320313 362.3125 272.320313 C 360.392456 272.320313 358.37561 272.320313 356.263672 272.320313 C 354.151611 272.320313 351.560303 272.320313 348.488281 272.320313 C 348.488281 278.464355 348.488281 284.60791 348.488281 290.751953 C 348.488281 296.703979 348.488281 302.463257 348.488281 308.03125 C 348.488281 313.407349 348.536865 318.351196 348.632813 322.863281 C 348.728882 327.375244 348.775391 331.263428 348.775391 334.527344 C 348.967407 340.671387 349.303101 346.479126 349.783203 351.951172 C 350.263184 357.423218 351.367798 361.503418 353.095703 364.191406 C 354.82373 366.879395 357.752808 368.944702 361.880859 370.384766 C 366.008911 371.824707 372.008789 372.735107 379.880859 373.119141 L 379.880859 376 L 301.767578 376 L 287.720703 376 L 217.671875 376 L 217.671875 373.119141 C 218.247925 373.119141 219.639648 372.927002 221.847656 372.542969 C 224.055664 372.159058 226.359741 371.487427 228.759766 370.527344 C 231.15979 369.567383 233.271729 368.224121 235.095703 366.496094 C 236.9198 364.768066 237.832031 362.559204 237.832031 359.871094 C 237.832031 358.143188 237.303955 355.311035 236.248047 351.375 C 235.192017 347.438965 233.703125 342.640625 231.783203 336.976563 C 229.863159 331.312622 227.656128 325.023315 225.160156 318.111328 C 222.664063 311.199219 219.97583 303.999756 217.095703 296.511719 L 140.488281 296.511719 C 137.608276 303.807739 134.824707 310.768555 132.136719 317.392578 C 129.44873 324.016602 126.760254 330.688232 124.072266 337.408203 C 120.040291 347.776245 118.023438 355.072876 118.023438 359.296875 C 118.023438 361.792847 118.792114 363.856201 120.328125 365.488281 C 121.864136 367.120239 123.832397 368.463501 126.232422 369.519531 C 128.632324 370.575562 131.223755 371.344238 134.007813 371.824219 C 136.791748 372.304199 139.431763 372.735107 141.927734 373.119141 L 141.927734 376 L 80.583984 376 Z M 143.080078 290.464844 L 214.792969 290.464844 C 211.528931 281.824829 208.215576 273.183105 204.855469 264.542969 C 201.495483 255.903076 198.232544 247.60083 195.064453 239.632813 C 191.896484 231.664795 189.015869 224.368164 186.423828 217.744141 C 183.831909 211.120117 181.671387 205.696777 179.943359 201.472656 C 178.791382 203.96875 177.112305 207.90332 174.904297 213.279297 C 172.696289 218.655273 169.959229 225.18335 166.695313 232.863281 C 163.431274 240.543213 159.83252 249.231689 155.896484 258.927734 C 151.960449 268.623779 147.68811 279.136841 143.080078 290.464844 Z"/>
					</svg>
				</a>
			</div>

			{#- Read more about `eleventy-navigation` at https://www.11ty.dev/docs/plugins/navigation/ #}
			<nav class="nav">
				<h2 class="visually-hidden">Top level navigation menu</h2>
				<ul class="nav-links nav-links-header">
					{%- for entry in collections.all | eleventyNavigation %}
						<li>
							<a href="{{ entry.url }}"{% if entry.url == page.url %} aria-current="page"{% endif %}>{{ entry.title }}</a>
						</li>
					{%- endfor %}
					<li>
						<a href="https://andrewford.gumroad.com/">Shop</a>
					</li>
					<li>
						<a rel="me" href="https://www.youtube.com/@CodewithAndrewFord">YouTube</a>
					</li>
				</ul>
			</nav>
		</header>

		<main id="skip" class="main wrapper">
			{{ content | safe }}
		</main>

		<footer class="wrapper">

			<ul class="nav-links nav-links-footer">
				<li>
					<a href="{{ metadata.fullUrl }}/about/">About</a>
				</li>
				<li>
					<a href="{{ metadata.fullUrl }}/archive/">Archive</a>
				</li>
				<li>
					<a href="{{ metadata.fullUrl }}/article/">Articles</a>
				</li>
				<li>
					<a rel="me" href="mailto:hireme@andrewford.co.nz">Email</a>
				</li>
				<li>
					<a rel="me authn" href="https://github.com/andrewjamesford">GitHub</a>
				</li>
				<li>
					<a rel="me authn" href="https://www.instagram.com/codewithandrewford/">Instagram</a>
				</li>
				<li>
					<a href="https://www.linkedin.com/in/andrewjamesford/">LinkedIn</a>
				</li>
				<li>
					<a rel="me" href="{{ metadata.fullUrl }}/@andrew">Mastodon</a>
				</li>
				<li>
					<a href="{{ metadata.fullUrl }}/privacy/">Privacy</a>
				</li>
				<li>
					<a href="{{ metadata.fullUrl }}/feed/feed.xml">RSS</a>
				</li>
				<li>
					<a href="{{ metadata.fullUrl }}/uses/">Uses</a>
				</li>
				<li>
					<a href="{{ metadata.fullUrl }}/save/">Save</a>
				</li>
				<li>
					<a href="https://andrewford.gumroad.com/">Shop</a>
				</li>
				<li>
					<a href="https://bsky.app/profile/andrewford.co.nz">Bsky</a>
				</li>
				<li>
					<a rel="me" href="https://www.youtube.com/@CodewithAndrewFord">YouTube</a>
				</li>
			</ul>

			{%- if (latestMusic) and (latestMusic.music.artist !== "") -%}
				<div id="lastFM" class="lastfm-widget">
					{% externalImage latestMusic.music.albumArtLarge, "Cover art for " + latestMusic.music.trackName + " by " + latestMusic.music.artist, [64, 174], "lastfm-img", "lastFMImg" %}
					<img src="{{ metadata.fullUrl }}/images/vinyl.webp" alt="LastFM placeholder image" class="lastfm-placeholder" id="lastFMPlaceholder" loading="lazy">
					<div>
						<div class="lastfm-title">
							Last listening to:
							<a href="{{ metadata.fullUrl }}/articles/lastfm-widget-netlify-functions/" title="How this widget was made" class="lastfm-icon">
								<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" id="help">
									<title>Icon of a Question Mark ?</title>
									<path fill="none" d="M0 0h24v24H0V0z"></path>
									<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92c-.5.51-.86.97-1.04 1.69-.08.32-.13.68-.13 1.14h-2v-.5c0-.46.08-.9.22-1.31.2-.58.53-1.1.95-1.52l1.24-1.26c.46-.44.68-1.1.55-1.8-.13-.72-.69-1.33-1.39-1.53-1.11-.31-2.14.32-2.47 1.27-.12.37-.43.65-.82.65h-.3C8.4 9 8 8.44 8.16 7.88c.43-1.47 1.68-2.59 3.23-2.83 1.52-.24 2.97.55 3.87 1.8 1.18 1.63.83 3.38-.19 4.4z"></path>
								</svg>
							</a>
						</div>
						<div class="lastfm-link">
							<a id="lastFMLink" href="https://www.last.fm">{{ latestMusic.music.artist }} - {{ latestMusic.music.trackName }}</a>
						</div>
						<div id="lastFMAlbum" class="lastfm-album">{{ latestMusic.music.album }}</div>
					</div>
				</div>
			{%- endif -%}
			<div class="website-built">
				Website made with <a href="https://www.11ty.dev/">Eleventy v3</a> and hosted on <a href="https://www.netlify.com/">Netlify</a>.
				Source available on <a href="https://github.com/andrewjamesford/andrewford-co-nz-11ty">GitHub</a>.
			</div>
		</footer>

		{# visible page url in html #}
		<!-- Current page: {{ page.url | htmlBaseUrl }} -->

		{% include "config.njk" %}
		{% include "chat.njk" %}

		{# DOMPurify for HTML sanitization in chat #}
		<script async src="https://cdn.jsdelivr.net/npm/dompurify@3.0.8/dist/purify.min.js" crossorigin="anonymous"></script>

		{# Render the JS bundle #}
		<script>
			{% getBundle "js" %}
		</script>

		{# Google Analytics #}

		{# Google tag (gtag.js) #}
		<script async src="https://www.googletagmanager.com/gtag/js?id={{ metadata.gTag}}"></script>
		<script>
			// Load Google Analytics only after page is fully loaded
			window.addEventListener('load', function () {
				if (
					CONFIG
					?.GTAG) {
					window.dataLayer = window.dataLayer || [];
					function gtag() {
						dataLayer.push(arguments);
					}
					gtag('js', new Date());

					gtag('config', '{{ metadata.gTag}}');
				}
			});
		</script>

		<script async src='https://storage.ko-fi.com/cdn/scripts/overlay-widget.js'></script>
		<script>
			window.addEventListener('load', function () {
				kofiWidgetOverlay.draw('codewithandrewford', {
					'type': 'floating-chat',
					'floating-chat.donateButton.text': 'Support me',
					'floating-chat.donateButton.background-color': '#323842',
					'floating-chat.donateButton.text-color': '#fff'
				});
			});
		</script>
	</body>
</html>