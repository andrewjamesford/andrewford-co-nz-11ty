---
permalink: /scripts/config.js
---

{% js %}
console.log('Loading frontend configuration...');
// Frontend Configuration
// This file is generated at build time with environment-specific values

window.APP_CONFIG = {
  // Environment
  environment: '{{ env.NODE_ENV }}',
  buildTime: '{{ env.BUILD_TIME }}',
  
  // URLs (adjust based on environment)
  urls: {
    site: '{{ env.SITE_URL }}',
    api: '{{ metadata.API_URL }}',
    serverless: '{{ env.SERVERLESS_URL }}'
  },
  
  // API Endpoints
  endpoints: {
    chat: '{{ env.SERVERLESS_URL }}/.netlify/functions/chatrag',
    lastPlayed: '{{ env.SERVERLESS_URL }}/.netlify/functions/lastplayed', 
    latestUploads: '{{ env.SERVERLESS_URL }}/.netlify/functions/latestUploads'
  },
  
  // Feature flags
  features: {
    analytics: {{ env.ENABLE_ANALYTICS | dump }},
    debug: {{ env.ENABLE_DEBUG | dump }}
  },
  
  // Public configuration
  analytics: {
    gtag: '{{ env.GTAG }}'
  },
  
  // Helper methods
  getEndpoint(name) {
    return this.endpoints[name] || null;
  },
  
  isProduction() {
    return this.environment === 'production';
  },
  
  isDevelopment() {
    return this.environment === 'development';
  }
};

// Freeze the config to prevent modification
Object.freeze(window.APP_CONFIG);

if (window.APP_CONFIG.features.debug) {
  console.log('ðŸ”§ App configuration loaded:', window.APP_CONFIG);
}
{% endjs %}